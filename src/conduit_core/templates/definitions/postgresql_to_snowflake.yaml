# GENERATED BY: conduit template postgresql_to_snowflake
# DESCRIPTION: Replicate PostgreSQL table into Snowflake
# LAST UPDATED: 2025-01-18

version: "1.0"
project:
  name: "postgresql_to_snowflake_pipeline"
  environment: "production"

sources:
  - name: "pg_source"
    type: "postgresql"
    host: "${PG_HOST}"
    port: 5432
    database: "${PG_DATABASE}"
    user: "${PG_USER}"
    password: "${PG_PASSWORD}"

destinations:
  - name: "snowflake_dest"
    type: "snowflake"
    account: "${SNOWFLAKE_ACCOUNT}"
    user: "${SNOWFLAKE_USER}"
    password: "${SNOWFLAKE_PASSWORD}"
    warehouse: "${SNOWFLAKE_WAREHOUSE}"
    database: "${SNOWFLAKE_DATABASE}"
    db_schema: "${SNOWFLAKE_SCHEMA}"
    table: "target_table"             # UPDATE THIS

resources:
  - name: "postgresql_to_snowflake"
    source: "pg_source"
    destination: "snowflake_dest"
    query: "SELECT * FROM source_table"  # UPDATE THIS
    mode: "append"

# HOW TO USE:
# 1. Update query with your source table
# 2. Set all environment variables
# 3. Save as `pipeline.yml`
# 4. Run: `conduit run pipeline.yml`
